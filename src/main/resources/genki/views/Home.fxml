<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.shape.Circle?>

<StackPane maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" fx:controller="genki.controllers.HomeController">
    <HBox style="-fx-background-color: #f3f4f6;">

        <VBox prefWidth="347.0" spacing="0" style="-fx-background-color: #1e2936;">

            <HBox alignment="CENTER_LEFT" spacing="12.0" style="-fx-background-color: #1e2936; -fx-padding: 16;">
            <ImageView fx:id="UserProfil" fitHeight="35.0" fitWidth="35.0" pickOnBounds="true" preserveRatio="true" />
                <VBox fx:id="UserNameStatus" spacing="2.0" HBox.hgrow="ALWAYS">
                    <Label fx:id="CurrentUsername" style="-fx-text-fill: white; -fx-font-size: 16px; -fx-font-weight: bold;" text="Alex Johnson" />
                    <Label style="-fx-text-fill: #4ade80; -fx-font-size: 12px;" text="Online" />
                </VBox>
            <Button fx:id="btnAdd" layoutX="302.0" layoutY="27.0" onAction="#AddUserOrGroup" style="-fx-background-color: transparent; -fx-text-fill: white; -fx-cursor: hand;-fx-font-size: 20px;" text="+" />
                <Button fx:id="btnSettings" onAction="#handleSettingsBtnClick" style="-fx-background-color: transparent; -fx-text-fill: white; -fx-font-size: 22px; -fx-cursor: hand;" text="âš™" />


            </HBox>

            <HBox style="-fx-background-color: #1e2936; -fx-padding: 0 16 16 16;">
                <TextField fx:id="searchField" prefHeight="40.0" promptText="Search conversations..." style="-fx-background-color: #2d3b4a; -fx-text-fill: white; -fx-prompt-text-fill: #6b7280; -fx-background-radius: 8; -fx-padding: 10;" HBox.hgrow="ALWAYS" />
            </HBox>

            <HBox spacing="8.0" style="-fx-background-color: #1e2936; -fx-padding: 0 16 16 16;">
                <Button fx:id="btnAll" style="-fx-background-color: #4a5fff; -fx-text-fill: white; -fx-background-radius: 20; -fx-padding: 8 16;" text="All" />
                <Button fx:id="btnUnread" style="-fx-background-color: transparent; -fx-text-fill: #9ca3af; -fx-background-radius: 20; -fx-padding: 8 16;" text="Unread" />
                <Button fx:id="btnGroups" style="-fx-background-color: transparent; -fx-text-fill: #9ca3af; -fx-background-radius: 20; -fx-padding: 8 16;" text="Groups" />
            </HBox>

  <ScrollPane fitToWidth="true" style="-fx-background-color: #1e2936; -fx-background: #1e2936; " VBox.vgrow="ALWAYS" stylesheets="@../css/chat.css">
    <VBox fx:id="conversationListContainer" spacing="2" style="-fx-background-color: #1e2936;">
        
        <HBox alignment="CENTER_LEFT" spacing="12.0" styleClass="conversation-item">
            <StackPane>
                <ImageView fitHeight="45.0" fitWidth="45.0" pickOnBounds="true" preserveRatio="true">
                    <clip>
                        <Circle centerX="22.5" centerY="22.5" radius="22.5" />
                    </clip>
                    <image>
                        <Image url="@../img/user-default.png" />
                    </image>
                </ImageView>
                <Circle fill="#4ade80" radius="6.0" stroke="#1e2936" strokeType="INSIDE" strokeWidth="2.0" StackPane.alignment="BOTTOM_RIGHT" />
            </StackPane>

            <VBox spacing="4.0" HBox.hgrow="ALWAYS">
                <Label style="-fx-text-fill: white; -fx-font-size: 14px; -fx-font-weight: bold;" text="Sarah Wilson" />
                <Label style="-fx-text-fill: #9ca3af; -fx-font-size: 13px;" text="Sent a photo" textOverrun="ELLIPSIS" />
            </VBox>

            <VBox alignment="CENTER_RIGHT" spacing="6.0">
                <Label style="-fx-text-fill: #6b7280; -fx-font-size: 11px;" text="12:45 PM" />
                <StackPane style="-fx-background-color: #4a5fff; -fx-background-radius: 10; -fx-min-width: 20; -fx-min-height: 20;">
                    <Label style="-fx-text-fill: white; -fx-font-size: 10px; -fx-font-weight: bold;" text="2" />
                </StackPane>
            </VBox>
        </HBox>
        
        
        <HBox alignment="CENTER_LEFT" spacing="12.0" styleClass="conversation-item">
            <StackPane>
                <ImageView fitHeight="45.0" fitWidth="45.0" pickOnBounds="true" preserveRatio="true">
                    <clip>
                        <Circle centerX="22.5" centerY="22.5" radius="22.5" />
                    </clip>
                    <image>
                        <Image url="@../img/user-default.png" />
                    </image>
                </ImageView>
                <Circle fill="#4ade80" radius="6.0" stroke="#1e2936" strokeType="INSIDE" strokeWidth="2.0" StackPane.alignment="BOTTOM_RIGHT" />
            </StackPane>

            <VBox spacing="4.0" HBox.hgrow="ALWAYS">
                <Label style="-fx-text-fill: white; -fx-font-size: 14px; -fx-font-weight: bold;" text="Sarah Wilson" />
                <Label style="-fx-text-fill: #9ca3af; -fx-font-size: 13px;" text="Sent a photo" textOverrun="ELLIPSIS" />
            </VBox>

            <VBox alignment="CENTER_RIGHT" spacing="6.0">
                <Label style="-fx-text-fill: #6b7280; -fx-font-size: 11px;" text="12:45 PM" />
                <StackPane style="-fx-background-color: #4a5fff; -fx-background-radius: 10; -fx-min-width: 20; -fx-min-height: 20;">
                    <Label style="-fx-text-fill: white; -fx-font-size: 10px; -fx-font-weight: bold;" text="2" />
                </StackPane>
            </VBox>
        </HBox>
        
        <HBox alignment="CENTER_LEFT" spacing="12.0" styleClass="conversation-item">
            <StackPane>
                <ImageView fitHeight="45.0" fitWidth="45.0" pickOnBounds="true" preserveRatio="true">
                    <clip>
                        <Circle centerX="22.5" centerY="22.5" radius="22.5" />
                    </clip>
                    <image>
                        <Image url="@../img/user-default.png" />
                    </image>
                </ImageView>
                <Circle fill="#4ade80" radius="6.0" stroke="#1e2936" strokeType="INSIDE" strokeWidth="2.0" StackPane.alignment="BOTTOM_RIGHT" />
            </StackPane>

            <VBox spacing="4.0" HBox.hgrow="ALWAYS">
                <Label style="-fx-text-fill: white; -fx-font-size: 14px; -fx-font-weight: bold;" text="Sarah Wilson" />
                <Label style="-fx-text-fill: #9ca3af; -fx-font-size: 13px;" text="Sent a photo" textOverrun="ELLIPSIS" />
            </VBox>

            <VBox alignment="CENTER_RIGHT" spacing="6.0">
                <Label style="-fx-text-fill: #6b7280; -fx-font-size: 11px;" text="12:45 PM" />
                <StackPane style="-fx-background-color: #4a5fff; -fx-background-radius: 10; -fx-min-width: 20; -fx-min-height: 20;">
                    <Label style="-fx-text-fill: white; -fx-font-size: 10px; -fx-font-weight: bold;" text="2" />
                </StackPane>
            </VBox>
        </HBox>
        
        </VBox>
</ScrollPane>

        </VBox>


        <VBox style="-fx-background-color: #f3f4f6;" HBox.hgrow="ALWAYS" VBox.vgrow="ALWAYS">

            <HBox fx:id="chatHeader" alignment="CENTER_LEFT" spacing="12.0" style="-fx-background-color: white; -fx-padding:16; -fx-border-color:#e5e7eb; -fx-border-width:0 0 1 0; -fx-cursor:hand;">
            <ImageView fx:id="profilTrigger" fitHeight="43.0" fitWidth="43.0" pickOnBounds="true" preserveRatio="true" >
            	<clip>
                     <Circle centerX="22.5" centerY="22.5" radius="22.5" />
                </clip>
                 <image>
                     <Image url="@../img/user-default.png" />
                 </image>
            </ImageView>
                <VBox fx:id="AmisNameStatus" spacing="2.0" HBox.hgrow="ALWAYS">
                    <Label fx:id="chatContactName" style="-fx-text-fill: #111827; -fx-font-size: 16px; -fx-font-weight: bold;" text="Sarah Wilson" />
                    <HBox alignment="CENTER_LEFT" spacing="6.0">
                        <Circle fx:id="chatContactStatusCircle" fill="#4ade80" radius="4.0" />
                        <Label fx:id="chatContactStatus" style="-fx-text-fill: #4ade80; -fx-font-size: 12px;" text="Online" />
                    </HBox>
                </VBox>

            </HBox>

            <ScrollPane fitToWidth="true" styleClass="scroll-pane" stylesheets="@../css/chat.css" VBox.vgrow="ALWAYS">
    <VBox fx:id="messagesContainer" prefHeight="400" prefWidth="700" spacing="16">
    <HBox spacing="10" styleClass="message-box, received-message">
        <ImageView fx:id="messageProfil" fitHeight="40" fitWidth="40" preserveRatio="true" styleClass="avatar">
        	<clip>
                     <Circle centerX="22.5" centerY="22.5" radius="22.5" />
                </clip>
                 <image>
                     <Image url="@../img/user-default.png" />
                 </image>
        </ImageView>
        <VBox spacing="4">
            <Label styleClass="sender-name" text="Aimane Aboufadle" />
            <Label maxWidth="600" styleClass="message-text, received-bubble" text="Long message text goes here, demonstrating a message received from another user." wrapText="true" />
        </VBox>
    </HBox>
    
    <HBox alignment="TOP_RIGHT" spacing="10" styleClass="message-box, sent-message">

        <VBox alignment="TOP_RIGHT" spacing="4">
            <Label styleClass="sender-name, sent-name" text="You" />
            <Label maxWidth="600" styleClass="message-text, sent-bubble" text="This message is finally on the RIGHT side, demonstrating a message sent by the current user ðŸŽ¯" wrapText="true" />
        </VBox>

        <ImageView fitHeight="40" fitWidth="40" preserveRatio="true" styleClass="avatar">
        	<clip>
                     <Circle centerX="22.5" centerY="22.5" radius="22.5" />
                </clip>
                 <image>
                     <Image url="@../img/user-default.png" />
                 </image>
    	</ImageView>
    </HBox>
    
</VBox>
    
</ScrollPane>




            <HBox alignment="CENTER" spacing="12.0" style="-fx-background-color: white; -fx-padding: 16; -fx-border-color: #e5e7eb; -fx-border-width: 1 0 0 0;">



                <TextField fx:id="messageInput" prefHeight="48.0" promptText="Type a message..." style="-fx-background-color: #f3f4f6; -fx-text-fill: #111827; -fx-prompt-text-fill: #9ca3af; -fx-background-radius: 24; -fx-padding: 12 20; -fx-font-size: 14px;" HBox.hgrow="ALWAYS" />


                <Button fx:id="btnSend" style="-fx-background-color: #6366f1; -fx-text-fill: white; -fx-background-radius: 24; -fx-padding: 12; -fx-cursor: hand; -fx-pref-width: 48; -fx-pref-height: 48;">
                    <graphic>
                        <Label style="-fx-text-fill: white; -fx-font-size: 18px;" text="âž¤" />
                    </graphic>
                </Button>

            </HBox>

        </VBox>


        <VBox fx:id="rightSideContainer" maxWidth="320" minWidth="320" prefWidth="320" style="-fx-background-color: white; -fx-border-color: #e5e7eb; -fx-border-width: 0 0 0 1;">


                <VBox fx:id="rightSidePanel" alignment="CENTER" spacing="12.0" style="-fx-padding: 32 24 24 24;">

                <ImageView fx:id="rightProfileImage" fitWidth="100.0" fitHeight="100.0" preserveRatio="true" pickOnBounds="true" styleClass="avatar">
                    
                    <clip>
                     <Circle centerX="42.5" centerY="42.5" radius="52.5" />
                </clip>
                 <image>
                     <Image url="@../img/user-default.png" />
                 </image>
                </ImageView>

                <Label fx:id="rightContactName" style="-fx-text-fill: #111827; -fx-font-size: 20px; -fx-font-weight: bold;" text="Sarah Wilson" />

                <Label fx:id="rightContactTitle" style="-fx-text-fill: #6b7280; -fx-font-size: 14px;" text="Product Designer" />

                <Label fx:id="rightContactBio" style="-fx-text-fill: #6b7280; -fx-font-size: 13px; -fx-wrap-text: true;" maxWidth="240" text="Short bio goes here. This will wrap if longer." />

                <HBox alignment="CENTER" spacing="6.0">
                    <Circle fill="#4ade80" radius="4.0" />
                    <Label fx:id="rightContactStatus" style="-fx-text-fill: #4ade80; -fx-font-size: 13px; -fx-font-weight: bold;" text="Online" />
                </HBox>
            </VBox>

        </VBox>

    </HBox>

    <VBox managed="false" style="-fx-background-color: rgba(0,0,0,0.5);" visible="false">

        <VBox alignment="TOP_CENTER" spacing="0" style="-fx-background-color: white; -fx-max-width: 600; -fx-max-height: 500; -fx-background-radius: 12; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.2), 10, 0, 0, 2);">


            <HBox alignment="CENTER_LEFT" spacing="12" style="-fx-background-color: #f9fafb; -fx-padding: 16; -fx-border-color: #e5e7eb; -fx-border-width: 0 0 1 0;">
                <Label style="-fx-font-size: 20px;" text="ðŸ”" />
                <TextField promptText="Rechercher partout..." style="-fx-background-color: white; -fx-background-radius: 20; -fx-padding: 10 16; -fx-font-size: 14px;" HBox.hgrow="ALWAYS" />

                <Button style="-fx-background-color: transparent; -fx-text-fill: #6b7280; -fx-font-size: 18px;" />
            </HBox>


            <ScrollPane fitToWidth="true" style="-fx-background-color: white; -fx-background: white;" VBox.vgrow="ALWAYS">
                <VBox spacing="0" style="-fx-background-color: white;" />
            </ScrollPane>

        </VBox>
    </VBox>
</StackPane>
